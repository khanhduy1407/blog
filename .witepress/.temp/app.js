"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("kdu"),t=require("kdu/server-renderer");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}const r=/^https?:/i,s="undefined"!=typeof window;function a(e,t){const n=function(e,t){t.sort(((e,t)=>{const n=t.split("/").length-e.split("/").length;return 0!==n?n:t.length-e.length}));for(const n of t)if(e.startsWith(n))return n}(t,Object.keys(e));return n?e[n]:void 0}function o(e){const{locales:t}=e.themeConfig||{},n=e.locales;return t&&n?Object.keys(t).reduce(((e,r)=>(e[r]={label:t[r].label,lang:n[r].lang},e)),{}):{}}function l(e,t){t=function(e,t){if(!s)return t;const n=e.base,r=n.endsWith("/")?n.slice(0,-1):n;return t.slice(r.length)}(e,t);const n=a(e.locales||{},t),r=a(e.themeConfig.locales||{},t);return Object.assign({},e,n,{themeConfig:Object.assign({},e.themeConfig,r,{locales:{}}),lang:(n||e).lang,locales:{},langs:o(e)})}const i=Symbol(),c=e.shallowRef((d='{"lang":"en-US","title":"NKDuy Blog","description":"The offical blog for the NKDuy project","base":"/blog/","head":[],"themeConfig":{},"locales":{},"langs":{},"scrollOffset":90}',JSON.parse(d)));var d;function u(t){const n=e.computed((()=>l(c.value,t.path)));return{site:n,theme:e.computed((()=>n.value.themeConfig)),page:e.computed((()=>t.data)),frontmatter:e.computed((()=>t.data.frontmatter)),lang:e.computed((()=>n.value.lang)),localePath:e.computed((()=>{const{langs:e,lang:t}=n.value;return function(e){return r.test(e)?e:function(e,t){return`${e}${t}`.replace(/\/+/g,"/")}(c.value.base,e)}(Object.keys(e).find((n=>e[n].lang===t))||"/")})),title:e.computed((()=>t.data.title?t.data.title+" | "+n.value.title:n.value.title)),description:e.computed((()=>t.data.description||n.value.description))}}function p(){const t=e.inject(i);if(!t)throw new Error("witepress data not properly injected in app");return t}function m(e){let t=e.replace(/\.html$/,"");if(t=decodeURIComponent(t),t.endsWith("/")&&(t+="index"),s){const e="/blog/";t=t.slice(e.length).replace(/\//g,"_")+".md";const n=__WP_HASH_MAP__[t.toLowerCase()];t=`${e}assets/${t}.${n}.js`}else t=`./${t.slice(1).replace(/\//g,"_")}.md.js`;return t}const h=Symbol(),f="http://a.com",g={relativePath:"",title:"404",description:"Not Found",headers:[],frontmatter:{},lastUpdated:0};function x(t,n){const r=e.reactive({path:"/",component:null,data:g});function a(e=(s?location.href:"/")){const t=new URL(e,f);return t.pathname.endsWith("/")||t.pathname.endsWith(".html")||(t.pathname+=".html",e=t.pathname+t.search+t.hash),s&&(history.replaceState({scrollPosition:window.scrollY},document.title),history.pushState(null,"",e)),l(e)}let o=null;async function l(a,i=0,d=!1){const u=new URL(a,f),p=o=u.pathname;try{let n=t(p);if("then"in n&&"function"==typeof n.then&&(n=await n),o===p){o=null;const{default:t,__pageData:a}=n;if(!t)throw new Error(`Invalid route component: ${t}`);r.path=p,r.component=e.markRaw(t),r.data=e.markRaw(JSON.parse(a)),s&&e.nextTick((()=>{if(u.hash&&!i){let t=null;try{t=document.querySelector(decodeURIComponent(u.hash))}catch(e){console.warn(e)}if(t)return void w(t,u.hash)}window.scrollTo(0,i)}))}}catch(m){if(m.message.match(/fetch/)||console.error(m),!d)try{const e=await fetch(c.value.base+"hashmap.json");return window.__WP_HASH_MAP__=await e.json(),void(await l(a,i,!0))}catch(h){}o===p&&(o=null,r.path=p,r.component=n?e.markRaw(n):null,r.data=g)}}return s&&(window.addEventListener("click",(e=>{const t=e.target.closest("a");if(t){const{href:n,protocol:r,hostname:s,pathname:o,hash:l,target:i}=t,c=window.location,d=o.match(/\.\w+$/);e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||"_blank"===i||r!==c.protocol||s!==c.hostname||d&&".html"!==d[0]||(e.preventDefault(),o===c.pathname?l&&l!==c.hash&&(history.pushState(null,"",l),window.dispatchEvent(new Event("hashchange")),w(t,l,t.classList.contains("header-anchor"))):a(n))}}),{capture:!0}),window.addEventListener("popstate",(e=>{l(location.href,e.state&&e.state.scrollPosition||0)})),window.addEventListener("hashchange",(e=>{e.preventDefault()}))),{route:r,go:a}}function v(){return function(){const t=e.inject(h);if(!t)throw new Error("useRouter() is called without provider.");return t}().route}function w(e,t,n=!1){let r=null;try{r=e.classList.contains("header-anchor")?e:document.querySelector(decodeURIComponent(t))}catch(s){console.warn(s)}if(r){let e=c.value.scrollOffset;"string"==typeof e&&(e=document.querySelector(e).getBoundingClientRect().bottom+24);const t=parseInt(window.getComputedStyle(r).paddingTop,10),s=window.scrollY+r.getBoundingClientRect().top-e+t;!n||Math.abs(s-window.scrollY)>window.innerHeight?window.scrollTo(0,s):window.scrollTo({left:0,top:s,behavior:"smooth"})}}function y(t,n){let r=[],s=!0;e.watchEffect((()=>{const e=t.data,a=n.value,o=e&&e.title,l=e&&e.description,i=e&&e.frontmatter.head;var c;document.title=(o?o+" | ":"")+a.title,document.querySelector("meta[name=description]").setAttribute("content",l||a.description),(e=>{if(s)return void(s=!1);const t=[],n=Math.min(r.length,e.length);for(let s=0;s<n;s++){let n=r[s];const[a,o,l=""]=e[s];if(n.tagName.toLocaleLowerCase()===a){for(const e in o)n.getAttribute(e)!==o[e]&&n.setAttribute(e,o[e]);for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;t in o||n.removeAttribute(t)}n.innerHTML!==l&&(n.innerHTML=l)}else document.head.removeChild(n),n=b(e[s]),document.head.append(n);t.push(n)}r.slice(n).forEach((e=>document.head.removeChild(e))),e.slice(n).forEach((e=>{const n=b(e);document.head.appendChild(n),t.push(n)})),r=t})([...i?(c=i,c.filter((e=>{return!("meta"===(t=e)[0]&&t[1]&&"description"===t[1].name);var t}))):[]])}))}function b([e,t,n]){const r=document.createElement(e);for(const s in t)r.setAttribute(s,t[s]);return n&&(r.innerHTML=n),r}const _=e.defineComponent({name:"WitePressContent",setup(){const t=v();return()=>e.h("div",{style:{position:"relative"}},[t.component?e.h(t.component):null])}});const R=e.defineComponent({__name:"Debug",__ssrInlineRender:!0,setup(n){const r=p(),s=e.ref(null),a=e.ref(!1),o=e.reactive(r);return e.watch(a,(e=>{e||(s.value.scrollTop=0)})),(n,r,l,i)=>{r(`<div${t.ssrRenderAttrs(e.mergeProps({class:["debug",{open:a.value}],ref_key:"el",ref:s},i))} data-k-ae0d51a6><p class="title" data-k-ae0d51a6>Debug</p><pre class="block" data-k-ae0d51a6>${t.ssrInterpolate(o)}</pre></div>`)}}}),k=R.setup;R.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add("node_modules/.pnpm/witepress@0.22.4_@algolia+client-search@4.11.0/node_modules/witepress/dist/client/app/components/Debug.kdu"),k?k(t,n):void 0};const S={__name:"Date",__ssrInlineRender:!0,props:{date:Object},setup(e){const n=e;return(r,s,a,o)=>{s(`<dl${t.ssrRenderAttrs(o)}><dt class="sr-only">Published on</dt><dd class="text-base leading-6 font-medium text-gray-500"><time${t.ssrRenderAttr("datetime",new Date(n.date.time).toISOString())}>${t.ssrInterpolate(e.date.string)}</time></dd></dl>`)}}},C=S.setup;S.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add(".witepress/theme/Date.kdu"),C?C(t,n):void 0};const $=JSON.parse('[{"title":"About me","href":"/blog/posts/about-me.html","date":{"time":1594468800000,"string":"July 11, 2020"},"excerpt":"<p>Hi there, my name is NKDuy. I\'m from Vietnam. I joined this IT community in 2020, the 2nd semester of 11th grade. By the time I went to college (in 2021), I had started to like open source ❤️.</p>\\n"}]'),A={__name:"Home",__ssrInlineRender:!0,setup:n=>(n,r,s,a)=>{r(`<div${t.ssrRenderAttrs(e.mergeProps({class:"divide-y divide-gray-200"},a))}><div class="pt-6 pb-8 space-y-2 md:space-y-5"><h1 class="text-3xl leading-9 font-extrabold text-gray-900 tracking-tight sm:text-4xl sm:leading-10 md:text-6xl md:leading-14">${t.ssrInterpolate(n.$frontmatter.title)}</h1><p class="text-lg leading-7 text-gray-500">${t.ssrInterpolate(n.$frontmatter.subtext)}</p></div><ul class="divide-y divide-gray-200">\x3c!--[--\x3e`),t.ssrRenderList(e.unref($),(({title:e,href:n,date:a,excerpt:o})=>{r('<li class="py-12"><article class="space-y-2 xl:grid xl:grid-cols-4 xl:space-y-0 xl:items-baseline">'),r(t.ssrRenderComponent(S,{date:a},null,s)),r(`<div class="space-y-5 xl:col-span-3"><div class="space-y-6"><h2 class="text-2xl leading-8 font-bold tracking-tight"><a class="text-gray-900"${t.ssrRenderAttr("href",n)}>${t.ssrInterpolate(e)}</a></h2>`),r(o?`<div class="prose max-w-none text-gray-500">${o}</div>`:"\x3c!----\x3e"),r(`</div><div class="text-base leading-6 font-medium"><a class="link" aria-label="read more"${t.ssrRenderAttr("href",n)}>Read more →</a></div></div></article></li>`)})),r("\x3c!--]--\x3e</ul></div>")}},I=A.setup;A.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add(".witepress/theme/Home.kdu"),I?I(t,n):void 0};const j={__name:"Author",__ssrInlineRender:!0,setup(n){const{frontmatter:r}=p();return(n,s,a,o)=>{s(`<dl${t.ssrRenderAttrs(e.mergeProps({class:"pt-6 pb-10 xl:pt-11 xl:border-b xl:border-gray-200"},o))}><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center xl:block space-x-8 sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2">`),e.unref(r).gravatar?s(`<img${t.ssrRenderAttr("src","https://gravatar.com/avatar/"+e.unref(r).gravatar)} alt="author image" class="w-10 h-10 rounded-full">`):s("\x3c!----\x3e"),s(`<dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-900">${t.ssrInterpolate(e.unref(r).author)}</dd>`),e.unref(r).twitter?s('<dt class="sr-only">Twitter</dt>'):s("\x3c!----\x3e"),e.unref(r).twitter?s(`<dd><a${t.ssrRenderAttr("href","https://twitter.com/"+e.unref(r).twitter)} target="_blank" rel="noopnener noreferrer" class="link">${t.ssrInterpolate(e.unref(r).twitter)}</a></dd>`):s("\x3c!----\x3e"),s("</dl></li></ul></dd></dl>")}}},O=j.setup;j.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add(".witepress/theme/Author.kdu"),O?O(t,n):void 0};const P={__name:"Article",__ssrInlineRender:!0,setup(n){const{frontmatter:r}=p(),s=v();function a(){return $.findIndex((e=>e.href===s.path))}const o=e.computed((async()=>await $[a()].date)),l=e.computed((()=>$[a()-1])),i=e.computed((()=>$[a()+1]));return(n,s,a,c)=>{const d=e.resolveComponent("Content");s(`<article${t.ssrRenderAttrs(e.mergeProps({class:"xl:divide-y xl:divide-gray-200"},c))}><header class="pt-6 xl:pb-10 space-y-1 text-center">`),s(t.ssrRenderComponent(S,{date:e.unref(o)},null,a)),s(`<h1 class="text-3xl leading-9 font-extrabold text-gray-900 tracking-tight sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">${t.ssrInterpolate(e.unref(r).title)}</h1></header><div class="divide-y xl:divide-y-0 divide-gray-200 xl:grid xl:grid-cols-4 xl:gap-x-10 pb-16 xl:pb-20" style="${t.ssrRenderStyle({"grid-template-rows":"auto 1fr"})}">`),s(t.ssrRenderComponent(j,null,null,a)),s('<div class="divide-y divide-gray-200 xl:pb-0 xl:col-span-3 xl:row-span-2">'),s(t.ssrRenderComponent(d,{class:"prose max-w-none pt-10 pb-8"},null,a)),t.ssrRenderKNode(s,e.createKNode(e.resolveDynamicComponent("script"),{src:"https://giscus.app/client.js","data-repo":"khanhduy1407/blog","data-repo-id":"R_kgDOJFUUHA","data-category":"Comment","data-category-id":"DIC_kwDOJFUUHM4CblHE","data-mapping":"url","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"1","data-input-position":"top","data-theme":"light","data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},null),a),s('</div><footer class="text-sm font-medium leading-5 divide-y divide-gray-200 xl:col-start-1 xl:row-start-2">'),e.unref(l)?s(`<div class="py-8"><h2 class="text-xs tracking-wide uppercase text-gray-500"> Next Article </h2><div class="link"><a${t.ssrRenderAttr("href",e.unref(l).href)}>${t.ssrInterpolate(e.unref(l).title)}</a></div></div>`):s("\x3c!----\x3e"),e.unref(i)?s(`<div class="py-8"><h2 class="text-xs tracking-wide uppercase text-gray-500"> Previous Article </h2><div class="link"><a${t.ssrRenderAttr("href",e.unref(i).href)}>${t.ssrInterpolate(e.unref(i).title)}</a></div></div>`):s("\x3c!----\x3e"),s('<div class="pt-8"><a class="link" href="/">← Back to the blog</a></div></footer></div></article>')}}},D=P.setup;P.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add(".witepress/theme/Article.kdu"),D?D(t,n):void 0};const L={__name:"Layout",__ssrInlineRender:!0,setup(n){const r=v(),s=e.computed((()=>"/blog/"===r.path.replace(/index.html$/,"")));return(n,r,a,o)=>{r(`<div${t.ssrRenderAttrs(e.mergeProps({class:"antialiased"},o))}><div class="max-w-3xl mx-auto px-4 sm:px-6 xl:max-w-5xl xl:px-0"><nav class="flex justify-between items-center pt-10 pb-2 font-bold"><a class="text-xl" href="/blog/" aria-label="NKDuy Blog"><img class="inline-block mr-2" style="${t.ssrRenderStyle({width:"50px"})}" alt="logo" src="https://github.com/khanhduy1407.png">`),e.unref(s)?r("\x3c!----\x3e"):r('<span class="hidden md:inline">NKDuy Blog</span>'),r('</a><div class="text-sm text-gray-500 leading-5"><a class="hover:text-gray-700" href="https://github.com/khanhduy1407/blog" target="_blank" rel="noopener">Repo</a></div></nav></div><main class="max-w-3xl mx-auto px-4 sm:px-6 xl:max-w-5xl xl:px-0">'),e.unref(s)?r(t.ssrRenderComponent(A,null,null,a)):r(t.ssrRenderComponent(P,null,null,a)),r("</main></div>")}}},E=L.setup;L.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add(".witepress/theme/Layout.kdu"),E?E(t,n):void 0};var T={Layout:L};const M=new Set,N=()=>document.createElement("link");let H;const U=s&&(H=N())&&H.relList&&H.relList.supports&&H.relList.supports("prefetch")?e=>{const t=N();t.rel="prefetch",t.href=e,document.head.appendChild(t)}:e=>{const t=new XMLHttpRequest;t.open("GET",e,t.withCredentials=!0),t.send()};const q=e.defineComponent({setup(t,{slots:n}){const r=e.ref(!1);return e.onMounted((()=>{r.value=!0})),()=>r.value&&n.default?n.default():null}}),K=T.NotFound||(()=>"404 Not Found"),W={name:"WitePressApp",setup(){const{site:t}=p();return e.onMounted((()=>{e.watch((()=>t.value.lang),(e=>{document.documentElement.lang=e}),{immediate:!0})})),function(){if(!s)return;if(!window.IntersectionObserver)return;let t;if((t=navigator.connection)&&(t.saveData||/2g/.test(t.effectiveType)))return;const n=window.requestIdleCallback||setTimeout;let r=null;const a=()=>{r&&r.disconnect(),r=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;r.unobserve(t);const{pathname:n}=t;if(!M.has(n)){M.add(n);const e=m(n);U(e)}}}))})),n((()=>{document.querySelectorAll("#app a").forEach((e=>{const{target:t,hostname:n,pathname:s}=e,a=s.match(/\.\w+$/);a&&".html"!==a[0]||"_blank"!==t&&n===location.hostname&&(s!==location.pathname?r.observe(e):M.add(s))}))}))};e.onMounted(a);const o=v();e.watch((()=>o.path),a),e.onUnmounted((()=>{r&&r.disconnect()}))}(),()=>e.h(T.Layout)}};function B(){const t=function(){let e,t=s;return x((r=>{let a=m(r);return t&&(e=a),(t||e===a)&&(a=a.replace(/\.js$/,".lean.js")),s?(t=!1,o=a,Promise.resolve().then((function(){return n(require(o))}))):require(a);var o}),K)}(),r=e.createSSRApp(W);r.provide(h,t);const a=u(t.route);return r.provide(i,a),r.component("Content",_),r.component("ClientOnly",q),r.component("Debug",(()=>null)),Object.defineProperty(r.config.globalProperties,"$frontmatter",{get:()=>a.frontmatter.value}),T.enhanceApp&&T.enhanceApp({app:r,router:t,siteData:c}),{app:r,router:t,data:a}}if(s){const{app:e,router:t,data:n}=B();t.go().then((()=>{y(t.route,n.site),e.mount("#app")}))}exports.createApp=B;
